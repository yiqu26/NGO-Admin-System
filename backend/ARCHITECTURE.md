# NGO å¹³å°å¾Œç«¯æ¶æ§‹æ–‡æª”

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¦½

NGO å¹³å°å¾Œç«¯æ˜¯ä¸€å€‹åŸºæ–¼ ASP.NET Core çš„ RESTful API æœå‹™ï¼Œæ¡ç”¨åˆ†å±¤æ¶æ§‹è¨­è¨ˆï¼Œæä¾›å®Œæ•´çš„ NGO ç®¡ç†å¾Œç«¯æ”¯æ´ã€‚ç³»çµ±ä»¥å€‹æ¡ˆç®¡ç†ç‚ºæ ¸å¿ƒï¼Œæ•´åˆäº†æ´»å‹•ç®¡ç†ã€ç‰©è³‡ç®¡ç†ã€ç”¨æˆ¶èªè­‰ç­‰åŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **å€‹æ¡ˆç®¡ç†ç³»çµ±** (é‡é»åŠŸèƒ½)
- **ç”¨æˆ¶èªè­‰èˆ‡æ¬Šé™ç®¡ç†**
- **æ´»å‹•ç®¡ç†èˆ‡å ±åç³»çµ±**
- **ç‰©è³‡ç®¡ç†èˆ‡åˆ†é…**
- **AI è¼”åŠ©åŠŸèƒ½**
- **æ’ç¨‹ç®¡ç†**
- **æ•¸æ“šçµ±è¨ˆèˆ‡åˆ†æ**

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæŠ€è¡“æ£§
```
ASP.NET Core 8.0 + Entity Framework Core
â”œâ”€â”€ JWT Authentication - èº«ä»½é©—è­‰
â”œâ”€â”€ FluentValidation - æ•¸æ“šé©—è­‰
â”œâ”€â”€ Azure OpenAI - AI æœå‹™æ•´åˆ
â”œâ”€â”€ Azure Storage - æ–‡ä»¶å­˜å„²
â”œâ”€â”€ SQL Server - æ•¸æ“šåº«
â””â”€â”€ Swagger/OpenAPI - API æ–‡æª”
```

### é–‹ç™¼å·¥å…·
- **Visual Studio 2022** - ä¸»è¦é–‹ç™¼ç’°å¢ƒ
- **Entity Framework Core** - ORM æ¡†æ¶
- **FluentValidation** - é©—è­‰æ¡†æ¶
- **Serilog** - æ—¥èªŒè¨˜éŒ„

## ğŸ“ ç›®éŒ„çµæ§‹

```
NGO_WebAPI_Backend/
â”œâ”€â”€ Controllers/           # API æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ AccountManagement/ # å¸³æˆ¶ç®¡ç†
â”‚   â”œâ”€â”€ ActivityManagement/ # æ´»å‹•ç®¡ç†
â”‚   â”œâ”€â”€ CaseManagement/    # å€‹æ¡ˆç®¡ç† (é‡é»)
â”‚   â”œâ”€â”€ Dashboard/         # å„€è¡¨æ¿
â”‚   â”œâ”€â”€ ScheduleManagement/ # æ’ç¨‹ç®¡ç†
â”‚   â””â”€â”€ SupplyManagement/  # ç‰©è³‡ç®¡ç†
â”œâ”€â”€ Models/                # æ•¸æ“šæ¨¡å‹
â”œâ”€â”€ DTOs/                  # æ•¸æ“šå‚³è¼¸å°è±¡
â”œâ”€â”€ Services/              # æ¥­å‹™é‚è¼¯æœå‹™
â”œâ”€â”€ Repositories/          # æ•¸æ“šè¨ªå•å±¤
â”œâ”€â”€ Validators/            # é©—è­‰å™¨
â”œâ”€â”€ Program.cs             # æ‡‰ç”¨ç¨‹å¼å…¥å£
â””â”€â”€ appsettings.json       # é…ç½®æ–‡ä»¶
```

## ğŸ¯ å€‹æ¡ˆç®¡ç†ç³»çµ± (é‡é»åŠŸèƒ½)

### ç³»çµ±æ¦‚è¿°
å€‹æ¡ˆç®¡ç†ç³»çµ±æ˜¯æ•´å€‹ NGO å¹³å°çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„å€‹æ¡ˆç”Ÿå‘½é€±æœŸç®¡ç†ï¼Œå¾å€‹æ¡ˆå»ºç«‹åˆ°çµæ¡ˆçš„å…¨æµç¨‹è¿½è¹¤ã€‚

### æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

#### 1. å€‹æ¡ˆå»ºç«‹èˆ‡ç®¡ç†
- **å€‹æ¡ˆè¨»å†Š** - å®Œæ•´çš„å€‹æ¡ˆä¿¡æ¯éŒ„å…¥
- **å€‹æ¡ˆæœå°‹** - å¤šæ¢ä»¶æ™ºèƒ½æœå°‹
- **å€‹æ¡ˆç·¨è¼¯** - ä¿¡æ¯æ›´æ–°èˆ‡ç¶­è­·
- **å€‹æ¡ˆç‹€æ…‹è¿½è¹¤** - ç‹€æ…‹è®Šæ›´è¨˜éŒ„

#### 2. AI è¼”åŠ©åŠŸèƒ½
- **èªéŸ³è½‰æ–‡å­—** - èªéŸ³è¨˜éŒ„è‡ªå‹•è½‰æ›
- **æ™ºèƒ½ä¿¡æ¯æå–** - AI è§£æå€‹æ¡ˆä¿¡æ¯
- **è‡ªå‹•åˆ†é¡** - æ™ºèƒ½å€‹æ¡ˆåˆ†é¡
- **ç›¸ä¼¼å€‹æ¡ˆæ¨è–¦** - åŸºæ–¼ AI çš„å€‹æ¡ˆåŒ¹é…

#### 3. å€‹æ¡ˆåˆ†æèˆ‡çµ±è¨ˆ
- **æ•¸æ“šè¦–è¦ºåŒ–** - å€‹æ¡ˆåˆ†å¸ƒåœ–è¡¨
- **è¶¨å‹¢åˆ†æ** - å€‹æ¡ˆè¶¨å‹¢çµ±è¨ˆ
- **æ•ˆèƒ½è©•ä¼°** - è™•ç†æ•ˆç‡åˆ†æ

### æŠ€è¡“å¯¦ç¾

#### æ§åˆ¶å™¨å±¤ (Controllers)
```
CaseManagement/
â”œâ”€â”€ CaseController.cs              # å€‹æ¡ˆ CRUD æ“ä½œ
â””â”€â”€ CaseSpeechToTextController.cs  # èªéŸ³è½‰æ–‡å­—è™•ç†
```

#### æœå‹™å±¤ (Services)
```
Services/
â”œâ”€â”€ CaseService.cs                 # å€‹æ¡ˆæ¥­å‹™é‚è¼¯
â”œâ”€â”€ ICaseService.cs               # å€‹æ¡ˆæœå‹™æ¥å£
â””â”€â”€ AzureOpenAIService.cs         # AI æœå‹™æ•´åˆ
```

#### æ•¸æ“šè¨ªå•å±¤ (Repositories)
```
Repositories/
â”œâ”€â”€ CaseRepository.cs             # å€‹æ¡ˆæ•¸æ“šè¨ªå•
â””â”€â”€ ICaseRepository.cs           # å€‹æ¡ˆå€‰å„²æ¥å£
```

#### æ•¸æ“šæ¨¡å‹ (Models)
```
Models/
â”œâ”€â”€ Case.cs                       # å€‹æ¡ˆå¯¦é«”æ¨¡å‹
â”œâ”€â”€ CaseLogin.cs                  # å€‹æ¡ˆç™»å…¥è¨˜éŒ„
â”œâ”€â”€ CaseOrder.cs                  # å€‹æ¡ˆè¨‚å–®
â””â”€â”€ NgoplatformDbContext.cs      # æ•¸æ“šåº«ä¸Šä¸‹æ–‡
```

### API ç«¯é»è¨­è¨ˆ

#### å€‹æ¡ˆç®¡ç†ç«¯é»
```
GET    /api/Case                    # ç²å–å€‹æ¡ˆåˆ—è¡¨
GET    /api/Case/{id}              # ç²å–å–®å€‹å€‹æ¡ˆ
POST   /api/Case                   # å‰µå»ºæ–°å€‹æ¡ˆ
PUT    /api/Case/{id}              # æ›´æ–°å€‹æ¡ˆ
DELETE /api/Case/{id}              # åˆªé™¤å€‹æ¡ˆ
GET    /api/Case/search            # æœå°‹å€‹æ¡ˆ
POST   /api/Case/batch             # æ‰¹æ¬¡æ“ä½œ
```

#### èªéŸ³è™•ç†ç«¯é»
```
POST   /api/CaseSpeechToText/upload    # ä¸Šå‚³èªéŸ³æ–‡ä»¶
POST   /api/CaseSpeechToText/process   # è™•ç†èªéŸ³è½‰æ–‡å­—
GET    /api/CaseSpeechToText/status    # ç²å–è™•ç†ç‹€æ…‹
```

### æ•¸æ“šæ¨¡å‹è¨­è¨ˆ

#### å€‹æ¡ˆå¯¦é«” (Case)
```csharp
public class Case
{
    public int Id { get; set; }
    public string CaseNumber { get; set; }
    public string Name { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
    public DateTime BirthDate { get; set; }
    public string Gender { get; set; }
    public string IdNumber { get; set; }
    public string Status { get; set; }
    public string Description { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime? UpdatedAt { get; set; }
    public string CreatedBy { get; set; }
    public string UpdatedBy { get; set; }
}
```

#### å€‹æ¡ˆç™»å…¥è¨˜éŒ„ (CaseLogin)
```csharp
public class CaseLogin
{
    public int Id { get; set; }
    public int CaseId { get; set; }
    public DateTime LoginTime { get; set; }
    public string LoginMethod { get; set; }
    public string IpAddress { get; set; }
    public string UserAgent { get; set; }
}
```

### AI æ•´åˆæ¶æ§‹

#### Azure OpenAI æœå‹™
- **èªéŸ³è½‰æ–‡å­—** - ä½¿ç”¨ Azure Speech Services
- **æ–‡æœ¬åˆ†æ** - ä½¿ç”¨ GPT-4 é€²è¡Œä¿¡æ¯æå–
- **æ™ºèƒ½åˆ†é¡** - åŸºæ–¼ AI çš„å€‹æ¡ˆè‡ªå‹•åˆ†é¡
- **ç›¸ä¼¼åº¦åŒ¹é…** - å€‹æ¡ˆç›¸ä¼¼åº¦è¨ˆç®—

#### AI æœå‹™é…ç½®
```csharp
public class AzureOpenAIService
{
    // èªéŸ³è½‰æ–‡å­—åŠŸèƒ½
    public async Task<string> ConvertSpeechToText(byte[] audioData)
    
    // æ–‡æœ¬ä¿¡æ¯æå–
    public async Task<CaseInfo> ExtractCaseInfo(string text)
    
    // æ™ºèƒ½åˆ†é¡
    public async Task<string> ClassifyCase(string description)
    
    // ç›¸ä¼¼å€‹æ¡ˆæ¨è–¦
    public async Task<List<Case>> FindSimilarCases(Case currentCase)
}
```

## ğŸ”§ å…¶ä»–åŠŸèƒ½æ¨¡çµ„

### 1. æ´»å‹•ç®¡ç†ç³»çµ±
```
ActivityManagement/
â”œâ”€â”€ ActivityController.cs              # æ´»å‹•ç®¡ç†
â”œâ”€â”€ ActivityAIOptimizerController.cs   # AI å„ªåŒ–
â”œâ”€â”€ ActivityImageGeneratorController.cs # åœ–ç‰‡ç”Ÿæˆ
â””â”€â”€ RegistrationReviewController.cs    # å ±åå¯©æ ¸
```

### 2. ç‰©è³‡ç®¡ç†ç³»çµ±
```
SupplyManagement/
â”œâ”€â”€ SupplyController.cs                # ç‰©è³‡ç®¡ç†
â”œâ”€â”€ EmergencySupplyNeedController.cs   # ç·Šæ€¥éœ€æ±‚
â”œâ”€â”€ RegularDistributionBatchController.cs # æ‰¹æ¬¡åˆ†é…
â””â”€â”€ RegularSupplyMatchController.cs    # ç‰©è³‡åŒ¹é…
```

### 3. ç”¨æˆ¶èªè­‰ç³»çµ±
```
AccountManagement/
â”œâ”€â”€ AuthController.cs                  # èªè­‰
â”œâ”€â”€ AccountController.cs               # å¸³æˆ¶ç®¡ç†
â”œâ”€â”€ UserOrderController.cs             # ç”¨æˆ¶è¨‚å–®
â””â”€â”€ WorkerController.cs                # å·¥ä½œäººå“¡ç®¡ç†
```

## ğŸ—„ï¸ æ•¸æ“šåº«è¨­è¨ˆ

### æ ¸å¿ƒè¡¨çµæ§‹
- **Cases** - å€‹æ¡ˆä¸»è¡¨
- **CaseLogins** - å€‹æ¡ˆç™»å…¥è¨˜éŒ„
- **CaseOrders** - å€‹æ¡ˆè¨‚å–®
- **Activities** - æ´»å‹•è¡¨
- **Supplies** - ç‰©è³‡è¡¨
- **Users** - ç”¨æˆ¶è¡¨
- **Workers** - å·¥ä½œäººå“¡è¡¨

### é—œè¯è¨­è¨ˆ
- å€‹æ¡ˆèˆ‡æ´»å‹•ï¼šå¤šå°å¤šé—œä¿‚
- å€‹æ¡ˆèˆ‡ç‰©è³‡ï¼šä¸€å°å¤šé—œä¿‚
- ç”¨æˆ¶èˆ‡è§’è‰²ï¼šå¤šå°å¤šé—œä¿‚
- æ´»å‹•èˆ‡å ±åï¼šä¸€å°å¤šé—œä¿‚

## ğŸ” å®‰å…¨æ¶æ§‹

### èªè­‰æ©Ÿåˆ¶
- **JWT Token** - ç„¡ç‹€æ…‹èªè­‰
- **è§’è‰²åŸºç¤æ¬Šé™** - RBAC æ¬Šé™æ§åˆ¶
- **API å¯†é‘°** - å¤–éƒ¨æœå‹™èªè­‰
- **HTTPS** - å‚³è¼¸åŠ å¯†

### æ•¸æ“šå®‰å…¨
- **è¼¸å…¥é©—è­‰** - FluentValidation
- **SQL æ³¨å…¥é˜²è­·** - Entity Framework
- **XSS é˜²è­·** - è¼¸å‡ºç·¨ç¢¼
- **CSRF é˜²è­·** - Token é©—è­‰

## ğŸ“Š æ€§èƒ½å„ªåŒ–

### æ•¸æ“šåº«å„ªåŒ–
- **ç´¢å¼•ç­–ç•¥** - æŸ¥è©¢æ€§èƒ½å„ªåŒ–
- **åˆ†é æŸ¥è©¢** - å¤§é‡æ•¸æ“šè™•ç†
- **ç·©å­˜æ©Ÿåˆ¶** - Redis ç·©å­˜
- **é€£æ¥æ± ** - æ•¸æ“šåº«é€£æ¥ç®¡ç†

### API å„ªåŒ–
- **ç•°æ­¥è™•ç†** - éé˜»å¡æ“ä½œ
- **éŸ¿æ‡‰å£“ç¸®** - Gzip å£“ç¸®
- **è«‹æ±‚é™æµ** - é˜²æ­¢æ¿«ç”¨
- **CDN åŠ é€Ÿ** - éœæ…‹è³‡æºåŠ é€Ÿ

## ğŸ” æ—¥èªŒèˆ‡ç›£æ§

### æ—¥èªŒç³»çµ±
- **çµæ§‹åŒ–æ—¥èªŒ** - Serilog
- **æ—¥èªŒç´šåˆ¥** - Debug, Info, Warning, Error
- **æ—¥èªŒèšåˆ** - é›†ä¸­å¼æ—¥èªŒç®¡ç†
- **æ€§èƒ½è¿½è¹¤** - è«‹æ±‚éŸ¿æ‡‰æ™‚é–“

### ç›£æ§æŒ‡æ¨™
- **API éŸ¿æ‡‰æ™‚é–“** - æ€§èƒ½ç›£æ§
- **éŒ¯èª¤ç‡** - ç³»çµ±ç©©å®šæ€§
- **ç”¨æˆ¶æ´»èºåº¦** - ä½¿ç”¨æƒ…æ³çµ±è¨ˆ
- **è³‡æºä½¿ç”¨ç‡** - ç³»çµ±è³‡æºç›£æ§

## ğŸš€ éƒ¨ç½²æ¶æ§‹

### ç’°å¢ƒé…ç½®
- **é–‹ç™¼ç’°å¢ƒ** - æœ¬åœ°é–‹ç™¼
- **æ¸¬è©¦ç’°å¢ƒ** - åŠŸèƒ½æ¸¬è©¦
- **é ç”Ÿç”¢ç’°å¢ƒ** - é›†æˆæ¸¬è©¦
- **ç”Ÿç”¢ç’°å¢ƒ** - æ­£å¼éƒ¨ç½²

### éƒ¨ç½²ç­–ç•¥
- **å®¹å™¨åŒ–éƒ¨ç½²** - Docker å®¹å™¨
- **CI/CD æµç¨‹** - è‡ªå‹•åŒ–éƒ¨ç½²
- **è—ç¶ éƒ¨ç½²** - é›¶åœæ©Ÿæ›´æ–°
- **å›æ»¾æ©Ÿåˆ¶** - å¿«é€Ÿå›æ»¾

## ğŸ”§ é–‹ç™¼æµç¨‹

### ä»£ç¢¼è¦ç¯„
- **å‘½åè¦ç¯„** - çµ±ä¸€å‘½åæ¨™æº–
- **ä»£ç¢¼è¨»é‡‹** - å®Œæ•´çš„æ–‡æª”è¨»é‡‹
- **éŒ¯èª¤è™•ç†** - çµ±ä¸€çš„éŒ¯èª¤è™•ç†
- **å–®å…ƒæ¸¬è©¦** - æ¸¬è©¦è¦†è“‹ç‡

### ç‰ˆæœ¬æ§åˆ¶
- **Git å·¥ä½œæµ** - åŠŸèƒ½åˆ†æ”¯é–‹ç™¼
- **ä»£ç¢¼å¯©æŸ¥** - Pull Request å¯©æŸ¥
- **è‡ªå‹•åŒ–æ¸¬è©¦** - CI/CD é›†æˆ
- **ç‰ˆæœ¬æ¨™ç±¤** - èªç¾©åŒ–ç‰ˆæœ¬

## ğŸ“š API æ–‡æª”

### Swagger æ–‡æª”
- **è‡ªå‹•ç”Ÿæˆ** - åŸºæ–¼ä»£ç¢¼è¨»é‡‹
- **äº¤äº’å¼æ¸¬è©¦** - åœ¨ç·š API æ¸¬è©¦
- **ç‰ˆæœ¬ç®¡ç†** - API ç‰ˆæœ¬æ§åˆ¶
- **ç¤ºä¾‹ä»£ç¢¼** - å®¢æˆ¶ç«¯ä»£ç¢¼ç¤ºä¾‹

### æ–‡æª”ç¶­è­·
- **å³æ™‚æ›´æ–°** - ä»£ç¢¼è®Šæ›´åŒæ­¥
- **ä½¿ç”¨ç¤ºä¾‹** - å®Œæ•´çš„èª¿ç”¨ç¤ºä¾‹
- **éŒ¯èª¤ç¢¼èªªæ˜** - è©³ç´°çš„éŒ¯èª¤ä¿¡æ¯
- **æœ€ä½³å¯¦è¸** - ä½¿ç”¨å»ºè­°

## ğŸ”® æœªä¾†è¦åŠƒ

### åŠŸèƒ½æ“´å±•
- **ç§»å‹•ç«¯ API** - ç§»å‹•æ‡‰ç”¨æ”¯æ´
- **ç¬¬ä¸‰æ–¹é›†æˆ** - å¤–éƒ¨ç³»çµ±å°æ¥
- **å¤§æ•¸æ“šåˆ†æ** - æ•¸æ“šæŒ–æ˜åŠŸèƒ½
- **æ©Ÿå™¨å­¸ç¿’** - æ™ºèƒ½æ¨è–¦ç³»çµ±

### æŠ€è¡“å‡ç´š
- **å¾®æœå‹™æ¶æ§‹** - æœå‹™æ‹†åˆ†
- **äº‹ä»¶é©…å‹•** - ç•°æ­¥æ¶ˆæ¯è™•ç†
- **GraphQL** - éˆæ´»çš„æ•¸æ“šæŸ¥è©¢
- **å¯¦æ™‚é€šè¨Š** - WebSocket æ”¯æ´

## ğŸ“ æŠ€è¡“æ”¯æ´

### é–‹ç™¼åœ˜éšŠ
- **å¾Œç«¯é–‹ç™¼** - ASP.NET Core å°ˆå®¶
- **æ•¸æ“šåº«ç®¡ç†** - SQL Server å°ˆå®¶
- **DevOps** - éƒ¨ç½²èˆ‡é‹ç¶­å°ˆå®¶
- **QA æ¸¬è©¦** - å“è³ªä¿è­‰å°ˆå®¶

### æ–‡æª”è³‡æº
- **API æ–‡æª”** - å®Œæ•´çš„æ¥å£æ–‡æª”
- **éƒ¨ç½²æŒ‡å—** - è©³ç´°çš„éƒ¨ç½²èªªæ˜
- **æ•…éšœæ’é™¤** - å¸¸è¦‹å•é¡Œè§£æ±º
- **æœ€ä½³å¯¦è¸** - é–‹ç™¼å»ºè­°æŒ‡å— 